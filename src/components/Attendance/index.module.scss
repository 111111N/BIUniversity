@use "../../styles/variables" as *;
@use "../../styles/mixins" as *;
@use "sass:color";

:root {
  --color-no-visit: #{$color-border};
  --color-border: #{$color-dark-primary};
  --color-visit: #{$color-success};
  --color-sick: #{$color-warning};
  --color-border-hover: #{color.adjust($color-text-secondary, $lightness:10%)};
  --color-visit-active: #{color.adjust($color-success, $blackness:25%)};
  --color-sick-active: #{color.adjust($color-warning, $blackness:30%)};
  --color-no-visit-active: #{color.adjust($color-text-secondary, $blackness:20%)};
  --color-border-active: #{color.adjust($color-text-secondary, $blackness:50%)};
  --color-light: #{$color-text-light};
}

.attendanceTableContainer {
  color: $color-text-light;

  border-radius: $border-radius;
  width: 100%;

  display: flex;
  flex-direction: column;

  h2 {
    margin-bottom: $padding;
    padding-bottom: 10px;
    font-weight: 500;
    border-bottom: 1px solid $color-border;
  }

  /* === Обёртка таблицы (контейнер с прокруткой) === */
  .tableWrapper {
    width: 100%;
    overflow: auto;
    max-height: 450px;
    position: relative;
    -webkit-overflow-scrolling: touch;
    border-radius: $border-radius;
        
    // Стилизация скроллбара (опционально)
    &::-webkit-scrollbar {
      width: 12px;
      height: 12px;
    }
    &::-webkit-scrollbar-corner {
      display: none;
    }
  }

  table {
    width: max-content;
    min-width: 100%;
    border-collapse: collapse;
    
  }
 
  /* === Базовые ячейки === */
  th,
  td {
    width: 40px;         // фиксированная ширина
  height: 40px;        // фиксированная высота
  min-width: 40px;
  min-height: 40px;

    padding: 5px 5px;
    text-align: center;
    min-width: 60px;
    white-space: nowrap;
    background: $color-dark-tertiary;
    user-select: none;

  }

  td:hover,
  th:hover {

    cursor: pointer;

  }

  /* === Фиксированная шапка === */
  thead {
    th {
      position: sticky;
      top: 0;
      z-index: 15; /* Выше боковых ячеек */
      background: $color-dark-primary;
      font-size: 15px;
      font-weight: 600;
      text-transform: uppercase;

    }
  }

  /* === Фиксация левого столбца (Ученик) === */
  .studentName {
    position: sticky;
    left: 0;
    z-index: 20 !important;
    background: $color-dark-primary;
    padding: 20px 50px;

    box-shadow: 2px 0 6px rgba(0, 0, 0, 0.4);
  }

  .studentColumn {
    position: sticky;
    left: 0;
    z-index: 10;
    background: $color-dark-primary;

    padding-left: 8px;
    padding-right: 12px;
    white-space: nowrap;
    border-right: 1px solid var(--color-border);
    box-shadow: 2px 0 6px rgba(0, 0, 0, 0.4); 
  }

  /* === Фиксация правого столбца (Процент) === */
  .percentage {
    position: sticky;
    right: 0;
    z-index: 20 !important;
    background: $color-dark-primary;

  }

  .percentageCell {
    position: sticky;
    right: 0;
    z-index: 10;
    background: $color-dark-primary;
    font-weight: bold;

    box-shadow: -2px 0 6px rgba(0, 0, 0, 0.4);
  }

/* === Подсветка выбранных заголовков === */
  .highlightHeader {

    background: linear-gradient(to top, $color-ghost, $color-dark-primary);
    
  }

  .highlightName {

    background: linear-gradient(to left, $color-ghost, $color-dark-primary);
  }

/* === SVG кружки === */
.dotWrapper {
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: center;
  svg {
    width: 100%;
    height: 100%;
    display: block;
  }


}

/* === Обёртка для имени + кнопка удаления === */
.editNameWrapper {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;

  input {
    flex: 1;
    background: $color-dark-tertiary;
    border: 3px solid $color-border;
    padding: 5px 4px;
    border-radius: 6px;
    color: $color-text-light;
    font-size: 14px;

    &:focus {
      outline: none;
      border-color: $color-accent-hover;
      background: $color-dark-primary;
    }
  }
}

/* === Встроенная кнопка "–" возле имени === */
.inlineDeleteBtn {
  background: $color-accent-primary;
  border: none;
  color: $color-text-light;
  width: 24px;
  height: 24px;
  padding: 0;            
  border-radius: 6px;
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: 0.1s ease;

  &:hover {
    background: $color-accent-background;
  }

  svg {
    width: 24px;            // подбираем под кнопку
    height: 24px;
    display: block;         // убираем inline-блок смещения
  }
}


.addRow tr{
  align-self: center;
}
.addRow td {
  background: $color-dark-tertiary;
  padding: 12px;
  text-align: center;
}

/* === Кнопка добавления ученика внутри таблицы === */
.inlineAddBtn {
  background: $color-accent-primary;
  color: $color-text-light;
  padding: 10px 20px;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  cursor: pointer;
  transition: 0.15s ease;

  &:hover {
    background:  $color-accent-background;
  }
  &:active {
    background:  $color-accent-background-hover;
  }
  svg{
    margin-right: 5px;
    color: $color-text-light;
  }
}

/* === Подсветка строки при Drag&Drop === */
.dragOver {
  outline: 2px dashed $color-accent-hover;
  outline-offset: -4px;
  @include shadows-inset(14px,-14px);
}
}
.controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;

  .leftButtons,
  .rightButtons {
    display: flex;
    align-items: center;
    gap: 10px; // расстояние между кнопками
  }

  button {
   
    padding: 8px 12px;

    svg {
      display: block;
    }
  }

  .activeButton {
    background-color: $color-accent-primary;
  }
}

.gradeCell {
  &.highlightCurrentCell {
    background: $color-border;
  }
}